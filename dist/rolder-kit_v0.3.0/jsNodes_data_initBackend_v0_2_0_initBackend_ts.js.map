{"version":3,"file":"jsNodes_data_initBackend_v0_2_0_initBackend_ts.js","sources":["./jsNodes/data/initBackend/v0.2.0/initBackend.ts","./libs/kuzzle/v.0.1.0/init.ts"],"sourcesContent":["import { NodeInstance } from \"@noodl/noodl-sdk\"\nimport init from \"../../../../libs/kuzzle/v.0.1.0/init\"\nimport validateJwt from \"../../../../libs/validateJwt/v0.1.0/validateJwt\"\n\nexport default async function initBackend_v0_2_0(noodleNode: NodeInstance) {\n    const { project, envVersion, debug } = window.Rolder\n\n    if (debug > 1) console.time('Initialize performance')\n    const Kuzzle = init({ project, envVersion })\n    Kuzzle.connect().then(() => {\n        window.Kuzzle = Kuzzle\n        if (debug > 0) console.log('Kuzzle initialized: ' + project + '-' + envVersion)\n        if (debug > 1) console.timeEnd('Initialize performance')\n        validateJwt().then((jwtValid) => {\n            if (jwtValid) noodleNode.sendSignalOnOutput('jwtValidationSucceed')\n            else noodleNode.sendSignalOnOutput('jwtValidationFailed')\n        })\n    }).catch((error: any) => {\n        console.error(error.message)\n    })\n}","import { Kuzzle, WebSocket } from 'kuzzle-sdk'\n\nexport default function init(props: { project: string, envVersion: string }): Kuzzle {\n    return new Kuzzle(\n        new WebSocket(`${props.project}.kuzzle.${props.envVersion}.rolder.app`, { port: 443 })\n    )\n}"],"names":["initBackend_v0_2_0","noodleNode","project","envVersion","debug","window","Rolder","console","time","Kuzzle","connect","then","log","timeEnd","jwtValid","sendSignalOnOutput","catch","error","message","init","props","WebSocket","port"],"mappings":"qOAIA,W,oCAA8BA,C,gDAAf,eAAeA,EAAmBC,CAAwB,EACrE,GAAM,CAAEC,QAAAA,CAAO,CAAEC,WAAAA,CAAU,CAAEC,MAAAA,CAAK,CAAE,CAAGC,OAAOC,OAE1CF,EAAQ,GAAGG,QAAQC,KAAK,0BAC5B,IAAMC,EAAS,cAAK,CAAEP,QAAAA,EAASC,WAAAA,CAAW,GAC1CM,EAAOC,UAAUC,KAAK,KAClBN,OAAOI,OAASA,EACZL,EAAQ,GAAGG,QAAQK,IAAI,uBAAyBV,EAAU,IAAMC,GAChEC,EAAQ,GAAGG,QAAQM,QAAQ,0BAC/B,gBAAcF,KAAK,AAACG,IACZA,EAAUb,EAAWc,mBAAmB,wBACvCd,EAAWc,mBAAmB,sBACvC,EACJ,GAAGC,MAAM,AAACC,IACNV,QAAQU,MAAMA,EAAMC,QACxB,EACJ,C,+GClBA,W,oCAAwBC,C,qBAAT,SAASA,EAAKC,CAA8C,EACvE,OAAO,IAAI,EAAAX,OACP,IAAI,EAAAY,UAAU,CAAC,EAAED,EAAMlB,QAAQ,QAAQ,EAAEkB,EAAMjB,WAAW,WAAW,CAAC,CAAE,CAAEmB,KAAM,GAAI,GAE5F,C"}