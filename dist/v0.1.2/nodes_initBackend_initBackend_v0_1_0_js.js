(self.webpackChunkrolder_kit=self.webpackChunkrolder_kit||[]).push([["nodes_initBackend_initBackend_v0_1_0_js"],{232002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});var i=n("49966"),o=e=>new i.Kuzzle(new i.WebSocket(e.project+".kuzzle."+e.envVersion+".rolder.app",{port:443}))},681514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});var i=n.ir(n("232002"));let o=async()=>{let{backendType:e,project:t,envVersion:n,debug:o}=Rolder;if("kuzzle"===e){let e=(0,i.default)({project:t,envVersion:n});try{await e.connect(),window.Kuzzle=e,o>0&&console.log("Kuzzle initialized: "+t+"-"+n)}catch(e){console.error(e.message)}}};async function l(e){let{sessionTimeout:t,debug:n}=Rolder,i=t=>{let n=cookies.get("jwtExpiresAt")-Date.now();if(n>0){let n=cookies.get("jwt");Kuzzle.connect(),Kuzzle.auth.checkToken(n).then(i=>{i.valid?(Kuzzle.jwt=n,e.sendSignalOnOutput("jwtValidationSucceed"),Kuzzle.auth.refreshToken({sessionTimeout:t}).then(e=>{cookies.set("jwt",e.jwt,{expires:30}),cookies.set("jwtExpiresAt",Date.now()+ms(t),{expires:30})})):e.sendSignalOnOutput("jwtValidationFailed")})}else e.sendSignalOnOutput("jwtValidationFailed")};n>1&&console.time("Initialize performance"),o().then(()=>{i(t),n>1&&console.timeEnd("Initialize performance")})}}}]);
//# sourceMappingURL=nodes_initBackend_initBackend_v0_1_0_js.js.map