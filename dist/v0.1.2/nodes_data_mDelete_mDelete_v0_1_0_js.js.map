{"version":3,"file":"nodes_data_mDelete_mDelete_v0_1_0_js.js","sources":["./nodes/data/mDelete/mDelete_v0.1.0.js","./libs/kuzzle/v0.0.6/m-delete.jsx"],"sourcesContent":["import mDelete from \"../../../libs/kuzzle/v0.0.6/m-delete\"\n\nexport default async function node(noodleNode) {\n    noodleNode.setOutputs({ isDeleting: true })\n    mDelete({ className: noodleNode.inputs.className, ids: noodleNode.inputs.ids })\n        .then(() => {\n            noodleNode.setOutputs({ isDeleting: false })\n            noodleNode.sendSignalOnOutput('sendDeleted')\n        })\n}","import ErrorHandler from '../../error-handler/v0.0.1/ErrorHandler'\nimport { classVersion, dbVersion } from '../../../utils/data/v.0.1.0/data'\nimport useData from '../../use-data/v0.1.0/use-data'\n\nconst mDelete = async ({ className, ids }) => {\n    const { debug, classes } = Rolder\n    const index = dbVersion()\n    const classNameV = classVersion(className)\n\n    if (debug > 0) console.time(classNameV + ' mDelete time')\n    if (debug > 1) console.log(classNameV + ' props:', { className, ids })\n\n    return Kuzzle.connect().then(() =>\n        Kuzzle.document.mDelete(index, classNameV, ids, { refresh: 'wait_for' })\n            .then((response) => {\n                if (!classes[className].subscribe) useData.invalidate({ className })\n\n                if (debug > 1) console.log(classNameV + ' mDelete:', response)\n                if (debug > 0) console.timeEnd(classNameV + ' mDelete time')\n                return\n            })\n            .catch((error) => ErrorHandler({ title: 'Системная ошибка!', message: 'Kuzzle mDelete ' + classNameV + ': ' + error.message }))\n    )\n}\n\nexport default mDelete"],"names":["node","noodleNode","setOutputs","isDeleting","className","inputs","ids","then","sendSignalOnOutput","mDelete","debug","classes","Rolder","index","dbVersion","classNameV","classVersion","console","time","log","Kuzzle","connect","document","refresh","response","subscribe","invalidate","timeEnd","catch","error","title","message"],"mappings":"2NAEA,W,oCAA8BA,C,4BAAf,eAAeA,EAAKC,CAAU,EACzCA,EAAWC,WAAW,CAAEC,WAAY,EAAK,GACzC,cAAQ,CAAEC,UAAWH,EAAWI,OAAOD,UAAWE,IAAKL,EAAWI,OAAOC,GAAI,GACxEC,KAAK,KACFN,EAAWC,WAAW,CAAEC,WAAY,EAAM,GAC1CF,EAAWO,mBAAmB,cAClC,EACR,C,+GCgBA,W,oCAAA,C,6DArBA,IAAMC,EAAU,MAAO,CAAEL,UAAAA,CAAS,CAAEE,IAAAA,CAAG,CAAE,IACrC,GAAM,CAAEI,MAAAA,CAAK,CAAEC,QAAAA,CAAO,CAAE,CAAGC,OACrBC,EAAQ,KAAAC,SAAA,IACRC,EAAa,KAAAC,YAAA,EAAaZ,GAKhC,OAHIM,EAAQ,GAAGO,QAAQC,KAAKH,EAAa,iBACrCL,EAAQ,GAAGO,QAAQE,IAAIJ,EAAa,UAAW,CAAEX,UAAAA,EAAWE,IAAAA,CAAI,GAE7Dc,OAAOC,UAAUd,KAAK,IACzBa,OAAOE,SAASb,QAAQI,EAAOE,EAAYT,EAAK,CAAEiB,QAAS,UAAW,GACjEhB,KAAK,AAACiB,IACC,CAACb,CAAO,CAACP,EAAU,CAACqB,WAAW,UAAQC,WAAW,CAAEtB,UAAAA,CAAU,GAE9DM,EAAQ,GAAGO,QAAQE,IAAIJ,EAAa,YAAaS,GACjDd,EAAQ,GAAGO,QAAQU,QAAQZ,EAAa,gBAEhD,GACCa,MAAM,AAACC,GAAU,cAAa,CAAEC,MAAO,oBAAqBC,QAAS,kBAAoBhB,EAAa,KAAOc,EAAME,OAAQ,IAExI,E,IAEA,EAAetB,C"}