(self.webpackChunkrolder_kit=self.webpackChunkrolder_kit||[]).push([["jsNodes_data_initBackend_v0_2_0_initBackend_ts"],{854423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});var i=n.ir(n("793736"));let o=window.Cookies,r=window.Ms;async function l(e){let{sessionTimeout:t,project:n,envVersion:l,debug:a}=window.Rolder,u=t=>{let n=o.get("jwtExpiresAt")-Date.now();if(n>0){let n=o.get("jwt");c.connect().then(()=>c.auth.checkToken(n).then(i=>{i.valid?(c.jwt=n,e.sendSignalOnOutput("jwtValidationSucceed"),c.auth.refreshToken({sessionTimeout:t}).then(e=>{o.set("jwt",e.jwt,{expires:30}),o.set("jwtExpiresAt",Date.now()+r(t),{expires:30})})):e.sendSignalOnOutput("jwtValidationFailed")}))}else e.sendSignalOnOutput("jwtValidationFailed")};a>1&&console.time("Initialize performance");let c=(0,i.default)({project:n,envVersion:l});c.connect().then(()=>{window.Kuzzle=c,u(t),a>0&&console.log("Kuzzle initialized: "+n+"-"+l),a>1&&console.timeEnd("Initialize performance")}).catch(e=>{console.error(e.message)})}},793736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});var i=n("49966");function o(e){return new i.Kuzzle(new i.WebSocket(`${e.project}.kuzzle.${e.envVersion}.rolder.app`,{port:443}))}}}]);
//# sourceMappingURL=jsNodes_data_initBackend_v0_2_0_initBackend_ts.js.map