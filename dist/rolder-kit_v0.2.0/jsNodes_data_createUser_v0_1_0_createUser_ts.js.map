{"version":3,"file":"jsNodes_data_createUser_v0_1_0_createUser_ts.js","sources":["./jsNodes/data/createUser/v0.1.0/createUser.ts","./libs/kuzzle/v.0.1.0/createUser.ts"],"sourcesContent":["import createUser from \"../../../../libs/kuzzle/v.0.1.0/createUser\"\n\nexport default async function node(noodleNode: any) {\n    noodleNode.setOutputs({ creating: true })\n    createUser(noodleNode.inputs.createUserItem)\n        .then((response) => {\n            noodleNode.setOutputs({ creating: false, createdUserItem: response })\n            noodleNode.sendSignalOnOutput('created')\n        })\n}","import ErrorHandler from '../../errorHandler/v0.1.0/ErrorHandler'\nimport { convertKuzzleResponse } from '../../../utils/data/v0.2.0/data'\n\nconst createUser = async ({ body }: { body: any }) => {\n    const Kuzzle = window.Kuzzle\n    const { debug } = window.Rolder\n\n    if (debug > 0) console.time('createUser time')\n    if (debug > 1) console.log('Props:', { body })\n\n    return Kuzzle.connect().then(() =>\n        Kuzzle.security.createUser(null, body, { refresh: 'wait_for' })\n            .then((response: any) => {\n                const jsonItem = convertKuzzleResponse(response)\n                if (debug > 1) console.log('createUser:', jsonItem)\n                if (debug > 0) console.timeEnd('createUser time')\n                return jsonItem\n            })\n            .catch((error: any) => ErrorHandler({ title: 'Системная ошибка!', message: 'Kuzzle createUser ' + ': ' + error.message }))\n    )\n}\n\nexport default createUser"],"names":["node","noodleNode","setOutputs","creating","inputs","createUserItem","then","response","createdUserItem","sendSignalOnOutput","createUser","body","Kuzzle","window","debug","Rolder","console","time","log","connect","security","refresh","jsonItem","convertKuzzleResponse","timeEnd","catch","error","title","message"],"mappings":"mOAEA,W,oCAA8BA,C,4BAAf,eAAeA,EAAKC,CAAe,EAC9CA,EAAWC,WAAW,CAAEC,SAAU,EAAK,GACvC,cAAWF,EAAWG,OAAOC,gBACxBC,KAAK,AAACC,IACHN,EAAWC,WAAW,CAAEC,SAAU,GAAOK,gBAAiBD,CAAS,GACnEN,EAAWQ,mBAAmB,UAClC,EACR,C,+GCaA,W,oCAAA,C,0CAnBA,IAAMC,EAAa,MAAO,CAAEC,KAAAA,CAAI,CAAiB,IAC7C,IAAMC,EAASC,OAAOD,OAChB,CAAEE,MAAAA,CAAK,CAAE,CAAGD,OAAOE,OAKzB,OAHID,EAAQ,GAAGE,QAAQC,KAAK,mBACxBH,EAAQ,GAAGE,QAAQE,IAAI,SAAU,CAAEP,KAAAA,CAAK,GAErCC,EAAOO,UAAUb,KAAK,IACzBM,EAAOQ,SAASV,WAAW,KAAMC,EAAM,CAAEU,QAAS,UAAW,GACxDf,KAAK,AAACC,IACH,IAAMe,EAAW,KAAAC,qBAAA,EAAsBhB,GAGvC,OAFIO,EAAQ,GAAGE,QAAQE,IAAI,cAAeI,GACtCR,EAAQ,GAAGE,QAAQQ,QAAQ,mBACxBF,CACX,GACCG,MAAM,AAACC,GAAe,cAAa,CAAEC,MAAO,oBAAqBC,QAAS,uBAA8BF,EAAME,OAAQ,IAEnI,E,IAEA,EAAelB,C"}