(self.webpackChunkrolder_kit=self.webpackChunkrolder_kit||[]).push([["jsNodes_data_mUpdate_v0_1_0_mUpdate_ts"],{874904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});var r=n.ir(n("1383"));async function s(e){e.setOutputs({updating:!0}),(0,r.default)(e.inputs.updateItems).then(t=>{e.setOutputs({updating:!1,updatedItems:t}),e.sendSignalOnOutput("updated")})}},1383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});var r=n("145067"),s=n.ir(n("995929")),a=n.ir(n("751616"));let d=async({dbClass:e,items:t})=>{let n=window.Kuzzle,{debug:d,dbClasses:u}=window.Rolder,i=(0,r.dbVersion)(),o=(0,r.dbClassVersion)(e);return d>0&&console.time(o+" mUpdate time"),d>1&&console.log(o+" props:",{dbClass:e,items:t}),t.forEach(e=>{e._id=e.id,delete e.id}),n.connect().then(()=>n.document.mUpdate(i,o,t,{refresh:"wait_for",retryOnConflict:3}).then(t=>{!u[e].subscribe&&a.default.invalidate({dbClass:e});let n=t.successes.map(e=>(0,r.convertKuzzleResponse)(e));return t.errors.length>0&&(0,s.default)({title:"Системная ошибка!",message:"Kuzzle mUpdate errors at class "+o+": "+JSON.stringify(t.errors)}),d>1&&console.log(o+" mUpdated:",n),d>0&&console.timeEnd(o+" mUpdate time"),n}).catch(e=>(0,s.default)({title:"Системная ошибка!",message:"Kuzzle mUpdate "+o+": "+e.message})))};var u=d}}]);
//# sourceMappingURL=jsNodes_data_mUpdate_v0_1_0_mUpdate_ts.js.map