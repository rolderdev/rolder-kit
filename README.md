# Как устанавливать/обновлять Rolder Kit
* Скачиваем с этого репозитария из папки dist актуальную версию.
* В Noodl в настройках открываем папку проекта и копируетм Rolder Kit в папку noodl_modules.
* Переносим старую версию Rolder Kit из noodl_modules на всякий случвй. Не должно быть две версии. Что то работать будет, но запутаетесь легко.
* Перезаходим в проект, проверяем не ругается ли Noodl на какую то ноду.

# Changelog
## 2023-08-04 v0.2.0
### Общие изменения:
* Rolder Kit теперь написан на Typescript.
* Все инпуты сгруппированы по типам.

### Новые ноды:
* Новая молекула UnstyledButton. Используется когда какой-то компонент нужно превратить в кнопку. Пример: плитка уборки в Стартуме, в мобильной версии.
* Новая нода для обновления несколько объектов разом: mUpdate.

### Изменения нод:
#### App
* Изменен приницп работы со связями. Теперь свзяи нужно укзывать прямо в схеме классов. Пример:        
    ```
    [
        complex: {
            version: 1,
            subscribe: true,
            defaultSort: { 'content.name': 'asc' },
            defaultOptions: { size: 100 }
        },
        house: {
            version: 1,
            subscribe: true,
            references: ['complex'],
            defaultSort: { 'content.name': 'asc' },
            defaultOptions: { size: 100 }
        },
    ]
    ```
* Принцип работы. Каждый раз когда исползуется UseData, запускаются два сценария:
    * Запрашиваемый класс переберает все классы, проверяя есть ли они в references. Если есть, ищет совпадающие объекты каждого класса из references и вставляет их.
    * Запрашиваемый класс смотрит свои references, ищет совпадающие объекты для каждого и добавляет их.
* Таким образом, не важно какой класс загрузится первым, один из сценариев вставит объекты по связям. Например, если в примере выше complex загрузится первым, то связи проставятся, когда загрузится house, т.к. прописано references: ['complex'], т.е. первый сценарий. Если же house загрзуится первым, то связи проставятся, когда загрузится complex, т.к. он переберет все классы и найдет себя в references в классе house.
#### UseData
* Добавлен статус loading. Он есть у самой UseData и у объекта Noodl, в который UseData записывает данные.
* Поправлен баг, из-за которого не обновлялись данные при subcribe: true
* Убрана опция Set references
#### UseSearch v0.2.0
* За счет нового подхода к связям теперь проделывает такую работу с найденными данными:
    * Заменяет найденные объекты объектами Noodl, тем самым восстанавливая связи.
    * В соответсвии с параметром Database classes, добавляет в реузльтааты поиска свзязанные данные.
#### Шаблоны Mustache
* Добавлена возможность экранировать спец. символы. Если в выводимых данных есть кавычки или другие символы, нужно использовать тройные скобки: '{{{content.name}}}'. Это работает для таблицы и всех компонентов-инпутов, у которых есть поле "Label field".
#### Select v0.3.0
* Устаканился принцип работы. Этот же принцип постепенно будет использоовать в дргих компонентах такого типа. Теперь он может обрабатывать 2 типа данных: Items и Custom items. Items основной, здесь нужно использовать стандартный формат данных любого класса. Нужно просто подать массив данных, Select сам конвертирует в нужный формат. Второй тип данных ручной: Custom items. Его нужно использовать, когда данные для выбора требуется создать на месте, а не брать с базы. Формат должен быть такой:
    ```
    [
        {
            value: 'option1',
            label: 'Вариант 1'
        },
        {
            value: 'option2',
            label: 'Вариант 2'
        },    
    ]
    ```

## 2023-07-28 v0.1.2
### Общие изменения:
* Миша обнаружил проблему, некоторые ноды выдают ошибку, если какой то обязательный параметр пуст. Все ноды теперь обернуты в специальный wrapper, который берет параметр portsToCheck и проверяет заполнены ли эти параметры, если не заполненны прямо на старннице где раполоагется нода будет выдано предупреждение. Если вы увидели какую то ноду, которая выдает ошибку на какой то пустой параметр, сообщайте, буду добавлять проверку или дефолтное значение.
* Принял решение изменить название переменной класса БД. Была 'className', стала 'dbClass'. Слишком много пересченией с другими класами: клсаа js, класс css...
### Новые молекулы:
* Box. Box - единственная молекула, которая не имеет праметров в Mantine. Она принимает только sx. Для этого и создана - прикручивать любой css. Очень похожа на Group в Noodl. В нашем случае добавлены параметры высоты, ширины и автовысоты. Эта нода появилась из-за потребности упралять скролом, когда скрол всей странницы не подходит. Чтобы скрол заработал, нужно, чтобы дочерние ноды поддерживали скрол или нужно обернуть дочерние ноды Box в ScrollArea. Сейчас проверено на Table v0.2.0 Как использовать: нужно включить параметра Autoheigth и указать Bottom offset. Работает так: Box берет высоту экрана (portview), отнимает Bottom offset и задает фиксированную высоту, что и является требованием для включения скрола.
* Table v0.2.0:
    * Добавлена опция 'respectLineBreak' в схему таблицы. Эта опция нужна, если требуется сохранить переносы строк исходного текста. Пример использования:
        ```
        [
            {
                accessor: 'content.name',
                title: 'Название',
                width: '8rem',
            },
            {
                accessor: 'content.description',
                title: 'Описание',
                width: '8rem',
                props: {
                    respectLineBreak: true
                }
            }
        ]
        ```
    * Добавлена возможность использовать шаблоны доступа к данным поля. Для этого используется библиоткека Mustache. Пример использования:
        ```
        [{
            accessor: 'Уважаемый {{content.firstName}} {{content.lastName}}, еще текст...',
            title: 'ФИО',
            width: '8rem',
        }]    
        ```
    * Добавлена проверка, что схема таблицы не пуста.
    * Теперь таблица не ждет структуры данных, для которой нужно указывать класс БД. В нее нужно подавать массив объектов.
* UseData v0.2.0 Добавлена проверка, что класс БД указан.